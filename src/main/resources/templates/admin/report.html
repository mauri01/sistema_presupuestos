<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>SistemaDeVentas</title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <script href="../js/jquery/dist/jquery.min.js" th:src="@{/js/jquery/dist/jquery.min.js}" th:inline="javascript"></script>
  <!-- jQuery 3 -->

  <script href="../js/jquery-ui/jquery-ui.min.js" th:src="@{/js/jquery-ui/jquery-ui.min.js}" th:inline="javascript"></script>
  <!-- FLOT CHARTS -->
  <script href="../js/Flot/jquery.flot.js" th:src="@{/js/Flot/jquery.flot.js}" th:inline="javascript"></script>

  <script href="../js/Flot/jquery.flot.resize.js" th:src="@{/js/Flot/jquery.flot.resize.js}" th:inline="javascript"></script>
  <!-- FLOT PIE PLUGIN - also used to draw donut charts -->
  <script href="../js/Flot/jquery.flot.pie.js" th:src="@{/js/Flot/jquery.flot.pie.js}" th:inline="javascript"></script>
  <!-- FLOT CATEGORIES PLUGIN - Used to draw bar charts -->
  <script href="../js/Flot/jquery.flot.categories.js" th:src="@{/js/Flot/jquery.flot.categories.js}" th:inline="javascript"></script>

  <script type="text/javascript">
      var bar_data;
      var bar_data2;
      var fecha = new Date();
      var ano = fecha.getFullYear();

      function getAllCompras() {
          var arrayCompras = new Array(12);
          for (var i = 0; i < 12; i++) {
              $.ajax({
                  url: "http://localhost:8284/report/compras/"+i+"/"+ano,
                  method: "GET",
                  contentType: "application/json",
                  dataType: 'json',
                  async: false,
                  success: function (result) {
                      console.log("Array"+i+"Result"+result);
                      arrayCompras[i]=result;
                  }
              });
          }
          bar_data = {
              data : [['Enero', arrayCompras[0]], ['Febrero', arrayCompras[1]], ['Marzo', arrayCompras[2]],
                  ['Abril', arrayCompras[3]], ['Mayo', arrayCompras[4]], ['Junio', arrayCompras[5]],['Julio', arrayCompras[6]],
                  ['Agosto', arrayCompras[7]],['Septiembre', arrayCompras[8]],['Octubre', arrayCompras[9]],
                  ['Noviembre', arrayCompras[10]],['Diciembre', arrayCompras[11]]],
              color: '#3c8dbc'
          };
      }

      //------ funcion Ventas

      function getAllVentas() {
          var fecha = new Date();
          var ano = fecha.getFullYear();
          var arrayVenta= new Array(12);
          for (var i = 0; i < 12; i++) {
              $.ajax({
                  url: "http://localhost:8284/report/ventas/"+i+"/"+ano,
                  method: "GET",
                  contentType: "application/json",
                  dataType: 'json',
                  async: false,
                  success: function (result) {
                      console.log("Array"+i+"Result"+result);
                      arrayVenta[i]=result;
                  }
              });
          }
          bar_data2 = {
              data : [['Enero', arrayVenta[0]], ['Febrero', arrayVenta[1]], ['Marzo', arrayVenta[2]],
                  ['Abril', arrayVenta[3]], ['Mayo', arrayVenta[4]], ['Junio', arrayVenta[5]],['Julio', arrayVenta[6]],
                  ['Agosto', arrayVenta[7]],['Septiembre', arrayVenta[8]],['Octubre', arrayVenta[9]],
                  ['Noviembre', arrayVenta[10]],['Diciembre', arrayVenta[11]]],
              color: '#3c8dbc'
          };
      }



      $(document).ready(function () {
          getAllCompras();
          getAllVentas();
          $.plot($("#bar-chart"), [bar_data], {
              grid  : {
                  borderWidth: 1,
                  borderColor: '#ffffff',
                  tickColor  : '#000000'
              },
              series: {
                  bars: {
                      show    : true,
                      barWidth: 0.5,
                      align   : 'center'
                  }
              },
              xaxis : {
                  mode      : 'categories',
                  tickLength: 0
              }
          });

          $.plot($("#bar-chart2"), [bar_data2], {
              grid  : {
                  borderWidth: 1,
                  borderColor: '#ffffff',
                  tickColor  : '#000000'
              },
              series: {
                  bars: {
                      show    : true,
                      barWidth: 0.5,
                      align   : 'center'
                  }
              },
              xaxis : {
                  mode      : 'categories',
                  tickLength: 0
              }
          });
      });

  </script>
  <STYLES> <!-- STYLES-->
  <!-- Bootstrap 3.3.7 -->
  <link th:href="@{/css/bootstrap/dist/css/bootstrap.min.css}"
        href="../../css/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <!-- Font Awesome -->
  <link th:href="@{/css/font-awesome/css/font-awesome.min.css}"
        href="../../css/font-awesome/css/font-awesome.min.css" rel="stylesheet"/>
  <!-- Ionicons -->
  <link th:href="@{/css/Ionicons/css/ionicons.min.css}" href="../../css/Ionicons/css/ionicons.min.css"
        rel="stylesheet"/>
  <!-- Theme style -->
  <link th:href="@{/css/AdminLTE.min.css}" href="../../css/AdminLTE.min.css" rel="stylesheet"/>
  <!-- Material Design -->
  <link th:href="@{/css/bootstrap-material-design.min.css}" href="../../css/bootstrap-material-design.min.css"
        rel="stylesheet"/>

  <link th:href="@{/css/ripples.min.css}" href="../../css/ripples.min.css" rel="stylesheet"/>
  <link th:href="@{/css/MaterialAdminLTE.min.css}" href="../../css/MaterialAdminLTE.min.css" rel="stylesheet"/>
  <!-- AdminLTE Skins. Choose a skin from the css/skins -->
  <link th:href="@{/css/skins/all-md-skins.min.css}" href="../../css/skins/all-md-skins.min.css"
        rel="stylesheet"/>
  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <!-- Google Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
</STYLES>
</head>
<body class="hold-transition skin-blue sidebar-mini">
<div class="wrapper">

  <header class="main-header">
    <div th:replace="fragments/mainView :: header"></div>
  </header>
  <!-- Left side column. contains the logo and sidebar -->
  <aside class="main-sidebar">
    <!-- sidebar: style can be found in sidebar.less -->
    <div th:replace="fragments/mainView :: mainMenu"></div>
    <!-- /.sidebar -->
  </aside>

  <div class="content-wrapper">
    <section class="content-header">
      <h1>
        Reportes
        <small> Vision General</small>
      </h1>
      <br>
    </section>

    <section class="content">
      <div class="row">
        <div class="col-lg-3 col-xs-6">
          <!-- small box -->
          <div class="small-box bg-green">
            <div class="inner">
              <h3 th:text="'$'+${gananciasTotales}"></h3>
              <p>Ganancias del Mes</p>
            </div>
            <div class="icon">
              <i class="fa fa-toggle-up"></i>
            </div>
          </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-xs-6">
          <!-- small box -->
          <div class="small-box bg-yellow">
            <div class="inner">
              <h3 th:text="'$'+${gastosTotales}"></h3>
              <p>Gastos del Mes</p>
            </div>
            <div class="icon">
              <i class="fa fa-toggle-down"></i>
            </div>
          </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-xs-6">
          <!-- small box -->
          <div class="small-box bg-aqua">
            <div class="inner">
              <h3 th:text="'$'+${balance}"></h3>
              <p>Balance</p>
            </div>
            <div class="icon">
              <i class="fa fa-bar-chart"></i>
            </div>
          </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-xs-6">
          <!-- small box -->
          <div class="small-box bg-red">
            <div class="inner">
              <h3>PDF</h3>
              <p>Proximamente</p>
            </div>
            <div class="icon">
              <i class="fa fa-copy"></i>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <!-- Bar chart -->
        <div class="col-md-12">
          <!-- Bar chart -->
          <div class="box box-primary">
            <div class="box-header with-border">
              <i class="fa fa-bar-chart-o"></i>

              <h3 class="box-title">Compras Realizadas ($)</h3>

              <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                </button>
                <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
              </div>
            </div>
            <div class="box-body">
              <div id="bar-chart" style="height: 300px;"></div>
            </div>
            <!-- /.box-body-->
          </div>
        </div>
        <br>
        <div class="col-md-12">
          <!-- Bar chart -->
          <div class="box box-primary">
            <div class="box-header with-border">
              <i class="fa fa-bar-chart-o"></i>

              <h3 class="box-title">Ventas Realizadas ($)</h3>

              <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                </button>
                <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
              </div>
            </div>
            <div class="box-body">
              <div id="bar-chart2" style="height: 300px;"></div>
            </div>
            <!-- /.box-body-->
          </div>
        </div>
      </div>
    </section>

  </div>
  <!-- /.content-wrapper -->
  <div th:replace="fragments/mainView :: footer"></div>

  <div class="control-sidebar-bg"></div>
</div>
<!-- ./wrapper -->
<SCRIPTS><!-- MAIN SCRIPTS-->


  <!-- Bootstrap 3.3.7 -->
  <script href="../js/bootstrap/dist/js/bootstrap.min.js" th:src="@{/js/bootstrap/dist/js/bootstrap.min.js}"
          th:inline="javascript"/>
  <!-- Material Design -->
  <script href="../js/material.min.js" th:src="@{/js/material.min.js}" th:inline="javascript"/>
  <script href="../js/ripples.js" th:src="@{/js/ripples.js}" th:inline="javascript"/>
  <script type="text/javascript">
      $.material.init();
  </script>
  <!-- AdminLTE App -->
  <script href="../js/adminlte.min.js" th:src="@{/js/adminlte.min.js}" th:inline="javascript"/>
  <!-- AdminLTE for demo purposes -->
  <script href="../js/demo.js" th:src="@{/js/demo.js}" th:inline="javascript"/>

  <script href="../js/canvas/canvasjs.min.js" th:src="@{/js/canvas/canvasjs.min.js}" th:inline="javascript"/>

</SCRIPTS>
</body>
</html>
